{% extends 'base.html' %}
{% block title %}Wallet â€” Skyplay{% endblock %}

{% block content %}
<div class="container mx-auto px-4 sm:px-6 py-8 sm:py-10">
  <!-- ðŸ’° Wallet Header -->
  <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6 sm:mb-8 text-center sm:text-left">
    <h1 class="text-2xl sm:text-3xl font-bold text-gray-800 flex items-center justify-center sm:justify-start gap-2">
      <svg xmlns="http://www.w3.org/2000/svg" class="w-7 h-7 sm:w-8 sm:h-8 text-green-600" fill="none" viewBox="0 0 24 24"
        stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
          d="M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-2m4-5h-4a1 1 0 00-1 1v4a1 1 0 001 1h4v-6z" />
      </svg>
      <span>My Wallet</span>
    </h1>
  </div>

  <!-- ðŸ’³ Wallet Balance Card -->
  <div class="bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-2xl shadow-lg p-6 sm:p-8 mb-8 sm:mb-10">
    <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0">
      <div class="text-center sm:text-left">
        <p class="text-base sm:text-lg opacity-80">Refundable Balance</p>
        <p class="text-4xl sm:text-5xl font-extrabold mt-1 sm:mt-2">â‚¹{{ partner.refundable_wallet|floatformat:2 }}</p>
      </div>
      <div class="bg-white/20 p-3 sm:p-4 rounded-full mx-auto sm:mx-0">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-10 h-10 sm:w-12 sm:h-12 text-white" fill="none" viewBox="0 0 24 24"
          stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8V4m0 12v4" />
        </svg>
      </div>
    </div>
  </div>

  <!-- ðŸ§¾ Transaction History -->
  <div class="bg-white rounded-2xl shadow-md overflow-hidden">
    <div class="flex items-center justify-between px-4 sm:px-6 py-3 sm:py-4 border-b">
      <h2 class="text-lg sm:text-xl font-semibold text-gray-800 flex items-center gap-2">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 sm:w-6 sm:h-6 text-blue-600" fill="none" viewBox="0 0 24 24"
          stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M8 7V3m8 4V3m-9 8h10m-11 4h12m-5 4v4m-2-4v4" />
        </svg>
        <span>Transaction History</span>
      </h2>
    </div>

    {% if transactions %}
    <!-- ðŸ§¾ Table for large screens -->
    <div class="hidden sm:block overflow-x-auto">
      <table class="min-w-full text-left text-gray-700">
        <thead class="bg-gray-50 text-gray-500 uppercase text-sm">
          <tr>
            <th class="py-3 px-6">Date</th>
            <th class="py-3 px-6">Type</th>
            <th class="py-3 px-6 text-right">Amount</th>
            <th class="py-3 px-6">Order</th>
            <th class="py-3 px-6">Description</th>
          </tr>
        </thead>
        <tbody class="divide-y divide-gray-100">
          {% for t in transactions %}
          <tr class="hover:bg-gray-50 transition">
            <td class="py-3 px-6">{{ t.transaction_date }}</td>
            <td class="py-3 px-6">
              {% if t.transaction_type == "Credit" %}
              <span class="inline-flex items-center px-3 py-1 text-sm font-medium text-green-700 bg-green-100 rounded-full">
                <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M12 4v16m8-8H4" />
                </svg>
                Credit
              </span>
              {% else %}
              <span class="inline-flex items-center px-3 py-1 text-sm font-medium text-red-700 bg-red-100 rounded-full">
                <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M20 12H4" />
                </svg>
                Debit
              </span>
              {% endif %}
            </td>
            <td class="py-3 px-6 text-right font-semibold {% if t.transaction_type == 'Credit' %}text-green-600{% else %}text-red-600{% endif %}">
              â‚¹{{ t.amount|floatformat:2 }}
            </td>
            <td class="py-3 px-6">
              {% if t.order %}
                <span class="text-sm font-medium text-blue-600">{{ t.order.order_id }}</span>
              {% else %}
                <span class="text-gray-400">N/A</span>
              {% endif %}
            </td>
            <td class="py-3 px-6 text-gray-600">{{ t.description }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <!-- ðŸ“± Card layout for mobile -->
    <div class="sm:hidden divide-y divide-gray-100">
      {% for t in transactions %}
      <div class="p-4">
        <div class="flex justify-between items-center mb-2">
          <span class="text-sm text-gray-500">{{ t.transaction_date }}</span>
          <span class="text-sm font-semibold {% if t.transaction_type == 'Credit' %}text-green-600{% else %}text-red-600{% endif %}">
            â‚¹{{ t.amount|floatformat:2 }}
          </span>
        </div>
        <div class="flex items-center gap-2 mb-2">
          {% if t.transaction_type == "Credit" %}
          <span class="inline-flex items-center px-2 py-1 text-xs font-medium text-green-700 bg-green-100 rounded-full">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-3 h-3 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M12 4v16m8-8H4" />
            </svg>
            Credit
          </span>
          {% else %}
          <span class="inline-flex items-center px-2 py-1 text-xs font-medium text-red-700 bg-red-100 rounded-full">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-3 h-3 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M20 12H4" />
            </svg>
            Debit
          </span>
          {% endif %}
          {% if t.order %}
          <span class="text-xs font-medium text-blue-600">Order: {{ t.order.order_id }}</span>
          {% endif %}
        </div>
        <p class="text-gray-600 text-sm">{{ t.description }}</p>
      </div>
      {% endfor %}
    </div>
    {% else %}
    <div class="px-6 py-8 text-center text-gray-500">
      <svg xmlns="http://www.w3.org/2000/svg" class="w-14 h-14 sm:w-16 sm:h-16 mx-auto mb-3 text-gray-400" fill="none"
        viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
          d="M9 13h6m-3-3v6m8-7a9 9 0 11-18 0 9 9 0 0118 0z" />
      </svg>
      <p class="text-base sm:text-lg">No transactions yet.</p>
    </div>
    {% endif %}
  </div>
</div>
{% endblock %}
