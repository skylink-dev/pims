{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{% block title %}Skyplay ISP Store{% endblock %}</title>
    <link rel="icon" type="image/x-icon" href="{% static 'images/favicon.ico' %}" />

    <!-- Google Fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;900&family=Roboto:wght@400;500&display=swap"
      rel="stylesheet"
    />

    <!-- Tailwind CSS & Font Awesome -->
    <link
      href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />

    <script src="{% static 'js/cart.js' %}" defer></script>
    <script src="{% static 'js/toast.js' %}" defer></script>
   <script src="https://cdn.tailwindcss.com"></script>

    <style>
      body {
        font-family: "Roboto", sans-serif;
        background-color: #f8f8f8;
      }
      h1, h2, h3, h4, h5, h6 {
        font-family: "Playfair Display", serif;
      }
      .product-card:hover {
        transform: translateY(-8px);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
      }
      #mobileMenu {
        backdrop-filter: blur(8px);
      }
      /* Toast style improvements */
      #toast-container div {
        z-index: 99999;
        font-size: 16px;
      }
    </style>

<style>
  /* 📱 Mobile-friendly adjustments */
  @media (max-width: 640px) {
    #cartPanel {
      width: 90%;
      right: -100%;
      border-radius: 1rem 1rem 0 0;
      top: auto;
      bottom: 0;
      transform: none;
    }

    #cartToggle {
      right: 1rem;
      bottom: 1.5rem;
      top: auto;
      transform: none;
      border-radius: 9999px;
      padding: 0.75rem 1rem;
    }
  }
</style>
    {% block extra_css %}{% endblock %}
  </head>

<body class="flex flex-col min-h-screen bg-gray-50">

    <!-- ✅ Global Toast Message Container -->
    <div id="toast-container" class="fixed top-5 right-5 z-50 space-y-2"></div>

  <body class="flex flex-col min-h-screen bg-gray-50">
    <!-- ✅ Navbar -->
    <header class="sticky top-0 bg-white shadow-md z-50">
  <div class="container mx-auto px-6 py-4 flex justify-between items-center">
    <!-- ✅ Logo -->
    <div class="flex items-center space-x-2">
      <img
        src="{% static 'images/new-logo.png' %}"
        alt="Skyplay ISP Store Logo"
        class="w-30 h-10 object-contain"
      />
      <h1 class="text-2xl md:text-3xl font-bold text-red-800">
         {{" "}}
      </h1>
    </div>

    <!-- ✅ Desktop Menu -->
    <nav
  id="desktopMenu"
  class="hidden md:flex items-center space-x-8 text-lg font-semibold text-gray-800"
>
  <!-- Home -->
  <a
    href="{% url 'home' %}"
    class="flex items-center  space-x-2 group transition  p-3 h-full {% if request.path == '/' %}bg-red-100 rounded -xl{% endif %}  "
  >
    <svg
      xmlns="http://www.w3.org/2000/svg"
      class="w-6 h-6 text-red-600 group-hover:scale-110 transition-transform"
      fill="none"
      viewBox="0 0 24 24"
      stroke="currentColor"
    >
      <path
        stroke-linecap="round"
        stroke-linejoin="round"
        stroke-width="2"
        d="M3 12l9-9 9 9M4 10v10a1 1 0 001 1h14a1 1 0 001-1V10"
      />
    </svg>
    <span
      class="relative after:absolute after:left-0 after:-bottom-1 after:w-0 after:h-[2px] after:bg-red-600 after:transition-all group-hover:after:w-full"
      >Home</span
    >
  </a>

  <!-- Cart -->
  <a
  href="{% url 'view_cart' %}"
  class="relative flex items-center space-x-2 group transition p-3 h-full {% if '/cart/' in request.path %} bg-red-100 border-red-10 rounded-xl{% endif %}"
>
  <!-- 🛒 Cart Icon -->
  <svg
    xmlns="http://www.w3.org/2000/svg"
    class="w-6 h-6 text-blue-600 group-hover:scale-110 transition-transform"
    fill="none"
    viewBox="0 0 24 24"
    stroke="currentColor"
  >
    <path
      stroke-linecap="round"
      stroke-linejoin="round"
      stroke-width="2"
      d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13l-1.2 6H19M10 21a1 1 0 100-2 1 1 0 000 2zm8 0a1 1 0 100-2 1 1 0 000 2z"
    />
  </svg>

  <!-- 🛍️ Text -->
  <span
    class="relative after:absolute after:left-0 after:-bottom-1 after:w-0 after:h-[2px] after:bg-blue-600 after:transition-all group-hover:after:w-full"
  >
    Cart
  </span>

  <!-- 🔴 Cart Count Badge -->
  <span
    id="cart-count"
    class="absolute top-0 right-0 translate-x-2 -translate-y-2 bg-red-600 text-white text-xs font-bold rounded-full px-1.5 py-0.5
  {% if cart_count > 0 %} inline {% else %} inline {% endif %}">
   {{ cart_count }}
  </span>
</a>

  <!-- Wallet -->
  <a
    href="{% url 'wallet' %}"
    class="flex items-center space-x-2 group transition p-3 h-full {% if request.path == '/partner/wallet/' %}bg-red-100 rounded -xl{% endif %}"
  >
    <svg
      xmlns="http://www.w3.org/2000/svg"
      class="w-6 h-6 text-green-600 group-hover:scale-110 transition-transform"
      fill="none"
      viewBox="0 0 24 24"
      stroke="currentColor"
    >
      <path
        stroke-linecap="round"
        stroke-linejoin="round"
        stroke-width="2"
        d="M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-2m4-5h-4a1 1 0 00-1 1v4a1 1 0 001 1h4v-6z"
      />
    </svg>
    <span
      class="relative after:absolute after:left-0 after:-bottom-1 after:w-0 after:h-[2px] after:bg-green-600 after:transition-all group-hover:after:w-full"
      >Wallet</span
    >
  </a>

  <!-- Orders -->
  <a
    href="{% url 'orders' %}"
    class="flex items-center space-x-2 group transition p-3 h-full {% if '/order/orders/' in request.path  %}bg-red-100 rounded -xl{% endif %}"
  >
    <svg
      xmlns="http://www.w3.org/2000/svg"
      class="w-6 h-6 text-yellow-600 group-hover:scale-110 transition-transform"
      fill="none"
      viewBox="0 0 24 24"
      stroke="currentColor"
    >
      <path
        stroke-linecap="round"
        stroke-linejoin="round"
        stroke-width="2"
        d="M20 13V9a2 2 0 00-2-2h-3V5a2 2 0 00-2-2H8a2 2 0 00-2 2v2H3a2 2 0 00-2 2v4h19zM3 13v6a2 2 0 002 2h14a2 2 0 002-2v-6"
      />
    </svg>
    <span
      class="relative after:absolute after:left-0 after:-bottom-1 after:w-0 after:h-[2px] after:bg-yellow-600 after:transition-all group-hover:after:w-full"
      >Orders</span
    >
  </a>
        <a href="{% url 'customer_asset_mapping' %}" class="flex items-center space-x-2 group transition p-3 h-full {% if request.path == '/customer-mapping/' %}bg-red-100 rounded -xl{% endif %}">
    <svg xmlns="http://www.w3.org/2000/svg"
      class="w-6 h-6 text-purple-500 group-hover:scale-110 transition-transform"
      fill="none" viewBox="0 0 24 24" stroke="currentColor">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
        d="M13 16h-1v-4H9l4-4 4 4h-3v4zm-6 4a2 2 0 01-2-2V6a2 2 0 012-2h8l6 6v8a2 2 0 01-2 2H7z" />
    </svg>
    <span
      class="relative after:absolute after:left-0 after:-bottom-1 after:w-0 after:h-[2px]
      after:bg-purple-500 after:transition-all group-hover:after:w-full">
      Asset Mapping
    </span>
  </a>
</nav>

    <!-- ✅ Right Side Buttons -->
    <div class="flex items-center space-x-4">
      <!-- Mobile Menu Button -->
      <button
        id="mobileMenuBtn"
        class="md:hidden text-3xl text-red-600 focus:outline-none"
      >
        <i class="fas fa-bars"></i>
      </button>

      <!-- Logout Button (Desktop only) -->
      <form class="hidden md:block" action="{% url 'logout' %}" method="post">
        {% csrf_token %}
        <button
          type="submit"
          class="flex items-center space-x-2 bg-red-600 text-white px-4 py-2 rounded-lg shadow hover:bg-red-700 transition"
        >
          <i class="fas fa-sign-out-alt"></i>
          <span>Logout</span>
        </button>
      </form>
    </div>
  </div>
</header>



<!-- 🌐 Floating Cart Toggle Button -->
<div id="cartToggle"
     class="fixed right-4 top-1/2 -translate-y-1/2 bg-blue-600 text-white p-3 rounded-full shadow-lg cursor-pointer z-50 hover:bg-blue-700 transition">
  🛒
</div>

<!-- 🛍️ Floating Cart Panel (hidden initially) -->
<div id="cartPanel"
     class="fixed top-1/2 -translate-y-1/2 right-[-320px] bg-white shadow-xl w-72 rounded-l-2xl border transition-all duration-500 ease-in-out z-40 sm:w-80 opacity-0 pointer-events-none">
  <div class="p-4 border-b flex justify-between items-center bg-blue-600 text-white rounded-tl-2xl">
    <h3 class="text-lg font-semibold">Your Cart</h3>
    <button id="closeCart" class="text-white text-xl font-bold">&times;</button>
  </div>

  <div class="p-4 text-center text-gray-600">
    <p>🛒 View and manage your cart items.</p>
    <a href="{% url 'view_cart' %}"
       class="mt-4 inline-block bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition">
       Go to Cart
    </a>
  </div>
</div>



    <!-- ✅ Mobile Menu -->
    <div
      id="mobileMenu"
      class="fixed inset-0 bg-gray-900 bg-opacity-95 z-50 transform -translate-x-full transition-transform duration-300 ease-in-out md:hidden"
    >
      <div class="flex justify-end p-4">
        <button id="closeMobileMenu" class="text-white text-3xl focus:outline-none">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div class="flex flex-col items-center mt-10 space-y-6">
        <a href="{% url 'home' %}" class="w-3/4 text-center border border-transparent bg-white/10 backdrop-blur-md {% if request.path == '/' %} bg-gradient-to-r from-red-400 to-red-500 border-red-500 {% endif %} hover:bg-gradient-to-r from-red-500/10 to-red-600/10 hover:border-red-500 text-white py-3 rounded-xl shadow-lg text-lg font-semibold transition flex justify-center items-center space-x-2">
  <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 text-red-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l9-9 9 9M4 10v10a1 1 0 001 1h14a1 1 0 001-1V10" />
  </svg>
  <span>Home</span>
</a>

<a href="{% url 'view_cart' %}" class="w-3/4 text-center border border-transparent bg-white/10 backdrop-blur-md {% if '/cart/' in request.path %} bg-gradient-to-r from-red-400 to-red-500 border-red-500 {% endif %} hover:bg-gradient-to-r from-blue-500/10 to-blue-600/10 hover:border-blue-500 text-white py-3 rounded-xl shadow-lg text-lg font-semibold transition flex justify-center items-center space-x-2">
  <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 text-blue-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13l-1.2 6H19M7 13L5.4 7M10 21a1 1 0 100-2 1 1 0 000 2zm8 0a1 1 0 100-2 1 1 0 000 2z" />
  </svg>
  <span>Cart</span>
</a>

<a href="{% url 'wallet' %}" class="w-3/4 text-center border border-transparent bg-white/10 backdrop-blur-md {%if '/partner/wallet/' in request.path %} bg-gradient-to-r from-red-400 to-red-500 border-red-500 {% endif %} hover:bg-gradient-to-r from-green-500/10 to-green-600/10 hover:border-green-500 text-white py-3 rounded-xl shadow-lg text-lg font-semibold transition flex justify-center items-center space-x-2">
  <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 text-green-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-2m4-5h-4a1 1 0 00-1 1v4a1 1 0 001 1h4v-6z" />
  </svg>
  <span>Wallet</span>
</a>

<a href="{% url 'orders' %}" class="w-3/4 text-center border border-transparent bg-white/10 backdrop-blur-md {% if '/order/orders/' in request.path %} bg-gradient-to-r from-red-400 to-red-500 border-red-500 {% endif %} hover:bg-gradient-to-r from-yellow-500/10 to-yellow-600/10 hover:border-yellow-500 text-white py-3 rounded-xl shadow-lg text-lg font-semibold transition flex justify-center items-center space-x-2">
  <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 text-yellow-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 13V9a2 2 0 00-2-2h-3V5a2 2 0 00-2-2H8a2 2 0 00-2 2v2H3a2 2 0 00-2 2v4h19zM3 13v6a2 2 0 002 2h14a2 2 0 002-2v-6" />
  </svg>
  <span>Orders</span>
</a>
          <a href="{% url 'customer_asset_mapping' %}" class="w-3/4 text-center border border-transparent bg-white/10 backdrop-blur-md {% if '/customer-mapping/' in request.path %} bg-gradient-to-r from-red-400 to-red-500 border-red-500 {% endif %} hover:bg-gradient-to-r from-purple-500/10 to-purple-600/10 hover:border-purple-500 text-white py-3 rounded-xl shadow-lg text-lg font-semibold transition flex justify-center items-center space-x-2">
  <svg class="w-6 h-6 text-blue-700" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
  <path stroke-linecap="round" stroke-linejoin="round"
        d="M3 7h6v6H3V7zm12 0h6v6h-6V7zm-6 10h6v6h-6v-6zm-6-4h2v2H3v-2zm14 0h4v2h-4v-2z" />
</svg>
  <span>Asset Mapping</span>
</a>


        <!-- ✅ Mobile Logout -->
        <form action="{% url 'logout' %}" method="post" class="w-3/4 text-center">
          {% csrf_token %}
          <button
            type="submit"
            class="w-full mt-6 bg-red-600 text-white text-lg font-semibold py-3 rounded-lg shadow-md hover:bg-red-700 transition flex items-center justify-center space-x-2"
          >
            <i class="fas fa-sign-out-alt"></i>
            <span>Logout</span>
          </button>
        </form>
      </div>
    </div>

    <!-- ✅ Main Content -->
    <main class="flex-grow">{% block content %}{% endblock %}</main>

    <!-- ✅ Footer -->
   <footer class="bg-gray-900 text-white py-4">
  <div class="container mx-auto px-2 text-center">
    <p class="text-lg">
      &copy; {{ now|date:"Y" }} Skyplay. All rights reserved.
    </p>
  </div>
</footer>



<script>
  document.addEventListener("DOMContentLoaded", () => {
    const cartToggle = document.getElementById("cartToggle");
    const cartPanel = document.getElementById("cartPanel");
    const closeCart = document.getElementById("closeCart");

    const showCart = () => {
      cartPanel.style.right = "0px";
      cartPanel.style.opacity = "1";
      cartPanel.style.pointerEvents = "auto";
    };

    const hideCart = () => {
      cartPanel.style.right = "-320px";
      cartPanel.style.opacity = "0";
      cartPanel.style.pointerEvents = "none";
    };

    cartToggle.addEventListener("click", () => {
      if (cartPanel.style.right === "0px") {
        hideCart();
      } else {
        showCart();
      }
    });

    closeCart.addEventListener("click", hideCart);
  });
</script>




    <script>
      const mobileMenuBtn = document.getElementById("mobileMenuBtn");
      const closeMobileMenu = document.getElementById("closeMobileMenu");
      const mobileMenu = document.getElementById("mobileMenu");

      if (mobileMenuBtn && closeMobileMenu && mobileMenu) {
        mobileMenuBtn.addEventListener("click", () => {
          mobileMenu.classList.remove("-translate-x-full");
          mobileMenu.classList.add("translate-x-0");
          document.body.style.overflow = "hidden";
        });
        closeMobileMenu.addEventListener("click", () => {
          mobileMenu.classList.add("-translate-x-full");
          mobileMenu.classList.remove("translate-x-0");
          document.body.style.overflow = "";
        });
      }

      mobileMenuBtn.addEventListener("click", openMenu);
      closeMobileMenu.addEventListener("click", closeMenu);
    </script>

    <!-- ✅ Page-specific scripts -->
    {% block extra_js %}{% endblock %}
  </body>
</html>
