{% extends "base.html" %}
{% load static %}

{% block title %}Change Password{% endblock %}

{% block content %}
<section class="min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 via-gray-50 to-blue-100 px-4 py-10">
  <div class="bg-white/80 backdrop-blur-md shadow-2xl rounded-3xl w-full max-w-md p-8 sm:p-10 transition-all duration-300 hover:shadow-blue-200/80">



    <!-- Header -->
    <div class="text-center mb-8">
      <div class="flex justify-center mb-3">
        <div class="bg-blue-600 text-white rounded-full p-3">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.6" stroke="currentColor" class="w-7 h-7">
            <path stroke-linecap="round" stroke-linejoin="round" d="M12 11c0-1.657-1.343-3-3-3S6 9.343 6 11m12 0a6 6 0 00-12 0v4.5a2.25 2.25 0 002.25 2.25H9v1.125a.375.375 0 00.6.3l1.95-1.425a1.5 1.5 0 01.9-.3h3.3A2.25 2.25 0 0018 15.5V11z" />
          </svg>
        </div>
      </div>
      <h1 class="text-3xl font-extrabold text-gray-800">Change Password</h1>
      <p class="text-gray-500 mt-2">Keep your account secure with a new password</p>
    </div>

    <!-- Password Form -->
    <form method="post" class="space-y-6">
      {% csrf_token %}
      {% for field in form %}
        <div>
          <label for="{{ field.id_for_label }}" class="block text-sm font-semibold text-gray-700 mb-1">
            {{ field.label }}
          </label>
          <div class="relative">
            {{ field }}
            {% if "password" in field.name %}
              <button type="button"
                      class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600"
                      onclick="togglePassword('{{ field.id_for_label }}', this)">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                     stroke-width="1.6" stroke="currentColor" class="w-5 h-5">
                  <path stroke-linecap="round" stroke-linejoin="round"
                        d="M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.26 4.5 12 4.5c4.74 0 8.577 3.01 9.964 7.183.07.207.07.432 0 .639C20.577 16.49 16.74 19.5 12 19.5c-4.74 0-8.577-3.01-9.964-7.178z" />
                  <path stroke-linecap="round" stroke-linejoin="round"
                        d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                </svg>
              </button>
            {% endif %}
          </div>

          {% if field.errors %}
            <p class="text-red-600 text-sm mt-1">{{ field.errors|striptags }}</p>
          {% endif %}
        </div>
      {% endfor %}

      <!-- Submit -->
      <button
        type="submit"
        class="w-full bg-blue-600 text-white py-3 rounded-xl font-semibold shadow-md hover:bg-blue-700 hover:shadow-lg hover:scale-[1.02] transition duration-200"
      >
        Update Password
      </button>
    </form>

    <!-- Footer -->
    <div class="text-center mt-8">
      <a href="/" class="text-blue-600 hover:text-blue-700 font-medium text-sm inline-flex items-center gap-1">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke-width="1.8" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7" />
        </svg>
        Back to Dashboard
      </a>
    </div>
  </div>
</section>





<!-- 🔐 Password Visibility Toggle -->
<script>
  function togglePassword(id, btn) {
    const input = document.getElementById(id);
    const isHidden = input.type === 'password';
    input.type = isHidden ? 'text' : 'password';
    btn.querySelector('svg').classList.toggle('opacity-50');
  }

  // Style Django form fields dynamically
  document.addEventListener("DOMContentLoaded", () => {
    document.querySelectorAll("input").forEach(el => {
      el.classList.add(
        "w-full", "border", "border-gray-300", "rounded-xl",
        "px-3", "py-2.5", "focus:outline-none",
        "focus:ring-2", "focus:ring-blue-500", "focus:border-blue-500",
        "transition", "duration-150", "text-gray-700"
      );
    });
  });
</script>
{% endblock %}
